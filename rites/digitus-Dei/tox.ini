[tox]
envlist = fix,test,type
skipsdist = true

[testenv:fix]
description = Format and lint code
skip_install = true
deps =
    ruff>=0.4
commands =
    ruff format scripts tests
    ruff check --fix scripts tests

[testenv:test]
description = Run tests with 100% coverage
skip_install = true
deps =
    pytest>=8.0
    pytest-cov>=4.0
commands =
    pytest --cov=scripts --cov-report=term-missing --cov-fail-under=100 {posargs}

[testenv:type]
description = Type check with mypy
skip_install = true
deps =
    mypy>=1.0
commands =
    mypy scripts --strict